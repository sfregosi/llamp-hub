<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>Longline Acoustic Monitoring Project Hub: Protocol - Analysis</title>

  <meta property="description" itemprop="description" content="Detailed instructions for post-processing and acoustic analyses of longline HARP data"/>

  <link rel="icon" type="image/vnd.microsoft.icon" href="docs/images/favicon.ico"/>


  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Longline Acoustic Monitoring Project Hub: Protocol - Analysis"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Detailed instructions for post-processing and acoustic analyses of longline HARP data"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="Longline Acoustic Monitoring Project Hub"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Longline Acoustic Monitoring Project Hub: Protocol - Analysis"/>
  <meta property="twitter:description" content="Detailed instructions for post-processing and acoustic analyses of longline HARP data"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","favicon","output"]}},"value":[{"type":"character","attributes":{},"value":["Protocol - Analysis"]},{"type":"character","attributes":{},"value":["Detailed instructions for post-processing and acoustic analyses of longline HARP data\n"]},{"type":"character","attributes":{},"value":["docs/images/favicon.ico"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth","toc_float","css"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[4]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["static/toc-styles.css"]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  <meta name="distill:offset" content=""/>

  <script type="application/javascript">

    window.headroom_prevent_pin = false;

    window.document.addEventListener("DOMContentLoaded", function (event) {

      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        tolerance: 5,
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');

      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });

      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });

      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>

  <style type="text/css">

  /* Theme (user-documented overrideables for nav appearance) */

  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #0F2E3D;
    font-size: 15px;
    font-weight: 300;
  }

  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }

  .distill-site-nav a:hover {
    color: white;
  }

  @media print {
    .distill-site-nav {
      display: none;
    }
  }

  .distill-site-header {

  }

  .distill-site-footer {

  }


  /* Site Header */

  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }

  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }


  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }

  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }

  .distill-site-header .title {
    font-size: 18px;
    min-width: 150px;
  }

  .distill-site-header .logo {
    padding: 0;
  }

  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }

  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }



  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }


  .distill-site-header .nav-toggle {
    display: none;
  }

  .nav-dropdown {
    display: inline-block;
    position: relative;
  }

  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }

  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-dropdown-active {
    display: block;
  }

  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }

  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }

  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }

  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }

  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }


  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative; min-height: 500px; }
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }

  /* Site Footer */

  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }

  /* Headroom */

  d-title {
    padding-top: 6rem;
  }

  @media print {
    d-title {
      padding-top: 4rem;
    }
  }

  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }

  .headroom--transition {
    transition: all .4s ease-in-out;
  }

  .headroom--unpinned {
    top: -100px;
  }

  .headroom--pinned {
    top: 0;
  }

  /* adjust viewport for navbar height */
  /* helps vertically center bootstrap (non-distill) content */
  .min-vh-100 {
    min-height: calc(100vh - 100px) !important;
  }

  </style>

  <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="site_libs/font-awesome-6.4.0/css/all.min.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <script src="site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
  <script src="site_libs/fuse-6.4.1/fuse.min.js"></script>

  <script type="application/javascript">

  function getMeta(metaName) {
    var metas = document.getElementsByTagName('meta');
    for (let i = 0; i < metas.length; i++) {
      if (metas[i].getAttribute('name') === metaName) {
        return metas[i].getAttribute('content');
      }
    }
    return '';
  }

  function offsetURL(url) {
    var offset = getMeta('distill:offset');
    return offset ? offset + '/' + url : url;
  }

  function createFuseIndex() {

    // create fuse index
    var options = {
      keys: [
        { name: 'title', weight: 20 },
        { name: 'categories', weight: 15 },
        { name: 'description', weight: 10 },
        { name: 'contents', weight: 5 },
      ],
      ignoreLocation: true,
      threshold: 0
    };
    var fuse = new window.Fuse([], options);

    // fetch the main search.json
    return fetch(offsetURL('search.json'))
      .then(function(response) {
        if (response.status == 200) {
          return response.json().then(function(json) {
            // index main articles
            json.articles.forEach(function(article) {
              fuse.add(article);
            });
            // download collections and index their articles
            return Promise.all(json.collections.map(function(collection) {
              return fetch(offsetURL(collection)).then(function(response) {
                if (response.status === 200) {
                  return response.json().then(function(articles) {
                    articles.forEach(function(article) {
                      fuse.add(article);
                    });
                  })
                } else {
                  return Promise.reject(
                    new Error('Unexpected status from search index request: ' +
                              response.status)
                  );
                }
              });
            })).then(function() {
              return fuse;
            });
          });

        } else {
          return Promise.reject(
            new Error('Unexpected status from search index request: ' +
                        response.status)
          );
        }
      });
  }

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // get search element (bail if we don't have one)
    var searchEl = window.document.getElementById('distill-search');
    if (!searchEl)
      return;

    createFuseIndex()
      .then(function(fuse) {

        // make search box visible
        searchEl.classList.remove('hidden');

        // initialize autocomplete
        var options = {
          autoselect: true,
          hint: false,
          minLength: 2,
        };
        window.autocomplete(searchEl, options, [{
          source: function(query, callback) {
            const searchOptions = {
              isCaseSensitive: false,
              shouldSort: true,
              minMatchCharLength: 2,
              limit: 10,
            };
            var results = fuse.search(query, searchOptions);
            callback(results
              .map(function(result) { return result.item; })
            );
          },
          templates: {
            suggestion: function(suggestion) {
              var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
                ? `<img src="${offsetURL(suggestion.preview)}"</img>`
                : '';
              var html = `
                <div class="search-item">
                  <h3>${suggestion.title}</h3>
                  <div class="search-item-description">
                    ${suggestion.description || ''}
                  </div>
                  <div class="search-item-preview">
                    ${img}
                  </div>
                </div>
              `;
              return html;
            }
          }
        }]).on('autocomplete:selected', function(event, suggestion) {
          window.location.href = offsetURL(suggestion.path);
        });
        // remove inline display style on autocompleter (we want to
        // manage responsive display via css)
        $('.algolia-autocomplete').css("display", "");
      })
      .catch(function(error) {
        console.log(error);
      });

  });

  </script>

  <style type="text/css">

  .nav-search {
    font-size: x-small;
  }

  /* Algolioa Autocomplete */

  .algolia-autocomplete {
    display: inline-block;
    margin-left: 10px;
    vertical-align: sub;
    background-color: white;
    color: black;
    padding: 6px;
    padding-top: 8px;
    padding-bottom: 0;
    border-radius: 6px;
    border: 1px #0F2E3D solid;
    width: 180px;
  }


  @media screen and (max-width: 768px) {
    .distill-site-nav .algolia-autocomplete {
      display: none;
      visibility: hidden;
    }
    .distill-site-nav.responsive .algolia-autocomplete {
      display: inline-block;
      visibility: visible;
    }
    .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
      margin-left: 0;
      width: 400px;
      max-height: 400px;
    }
  }

  .algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
    width: 90%;
    outline: none;
    border: none;
  }

  .algolia-autocomplete .aa-hint {
    color: #999;
  }
  .algolia-autocomplete .aa-dropdown-menu {
    width: 550px;
    max-height: 70vh;
    overflow-x: visible;
    overflow-y: scroll;
    padding: 5px;
    margin-top: 3px;
    margin-left: -150px;
    background-color: #fff;
    border-radius: 5px;
    border: 1px solid #999;
    border-top: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
    cursor: pointer;
    padding: 5px 4px;
    border-bottom: 1px solid #eee;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
    border-bottom: none;
    margin-bottom: 2px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
    overflow: hidden;
    font-size: 0.8em;
    line-height: 1.4em;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
    font-size: 1rem;
    margin-block-start: 0;
    margin-block-end: 5px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
    display: inline-block;
    overflow: hidden;
    height: 2.8em;
    width: 80%;
    margin-right: 4%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
    display: inline-block;
    width: 15%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
    height: 3em;
    width: auto;
    display: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
    display: initial;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
    background-color: #eee;
  }
  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
    font-weight: bold;
    font-style: normal;
  }

  </style>


  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
    font-size: 100%;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        const citeChild = $(this).children()[0]
        // Do not process if @xyz has been used without escaping and without bibliography activated
        // https://github.com/rstudio/distill/issues/466
        if (citeChild === undefined) return true

        if (citeChild.nodeName == "D-FOOTNOTE") {
          var fn = citeChild
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          // Could use CSS.escape too here, we insure backward compatibility in navigator
          return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <style type="text/css">
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */



  html {
    /*-- Main font sizes --*/
    --title-size:      50px;
    --body-size:       1.06rem;
    --code-size:       14px;
    --aside-size:      12px;
    --fig-cap-size:    13px;
    /*-- Main font colors --*/
    --title-color:     #000000;
    --header-color:    rgba(0, 0, 0, 0.8);
    --body-color:      rgba(0, 0, 0, 0.8);
    --aside-color:     rgba(0, 0, 0, 0.6);
    --fig-cap-color:   rgba(0, 0, 0, 0.6);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:    sans-serif;
    --mono-font:       monospace;
    --body-font:       sans-serif;
    --navbar-font:     sans-serif;  /* websites + blogs only */
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:    0.6rem;
    --heading-color:   rgba(0, 0, 0, 0.5);
    --body-size:       0.8rem;
    --body-color:      rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:    18px;
    --contents-size:   13px;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:    15px;
    --heading-color:   rgba(0, 0, 0, 0.65);
    --text-size:       0.8em;
    --text-color:      rgba(0, 0, 0, 0.5);
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:       18px;
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  .distill-site-footer {
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */
  </style>
  <style type="text/css">
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */

  /* Font options: Sanchez (headers / serif), Nunito Sans (body / sans-serif) */
  @import url('https://fonts.googleapis.com/css2?family=Sanchez&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400&display=swap');
  /* Code font (Roboto Mono) */
  @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400&display=swap');

  /* -- Define some colors -- */
  :root {
    --color-background:   #FFFFFF;
    --color-primary:      #220055;
    --color-secondary:    #047C91;
    --code-grey:          #EBEBEB;
    --white:              #FFFFFF;
    --dark-grey:          #575757;
  }

  html {
    /*-- Main font sizes --*/
    --title-size:         1.6rem;
    --body-size:          1.0rem;
    --code-size:          0.7rem;
    --aside-size:         0.75rem;
    --fig-cap-size:       0.90rem;
    /*-- Main font colors --*/
    --title-color:        var(--color-primary);
    --title-weight:       400
    --header-color:       var(--color-primary);
    --body-color:         rgba(0, 0, 0, 0.9);
    --aside-color:        rgba(0, 0, 0, 0.6);
    --fig-cap-color:      var(--color-secondary);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:       Open Sans;
    --mono-font:          Roboto Mono;
    --body-font:          Open Sans;
    --navbar-font:        Open Sans;
  }


  /*-- ARTICLE TITLE --*/
  d-title {
    padding-top:          4.5rem;
    padding-bottom:       0rem;
  }

  d-title h1 {
    font-size:            var(--title-size);
  }

  d-title p {
    font-size:            1.2rem;
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:       0.6rem;
    --heading-color:      rgba(0, 0, 0, 0.5);
    --body-size:          0.8rem;
    --body-color:         rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:       18px;
    --contents-size:      13px;
  }

  .d-contents a {
    color:                var(--dark-grey);
  }

  .d-contents nav a:hover {
    color:                var(--color-secondary);
    text-decoration:      none;
  }

  .d-contents nav h3 {
    text-transform:       uppercase; 
    margin-bottom:        0.6em;
  }

  /*-- ARTICLE BODY --*/
  d-article {
    padding-top:          1rem;
    padding-bottom:       0rem;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:       15px;
    --heading-color:      rgba(0, 0, 0, 0.65);
    --text-size:          0.8em;
    --text-color:         rgba(0, 0, 0, 0.5);
    margin-top:           20px;
    padding-top:          1.2rem;
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:         1.2rem;
    --text-color:         var(--white);
    --hover-color:        var(--code-grey);
    --text-size:          1.2rem;
    --bkgd-color:         var(--color-primary);
  }

  .distill-site-header a {
    font-weight:          lighter;
  }

  .distill-site-header a:hover {
    color:                var(--dark-grey);
    font-weight:          lighter;
    border-bottom:        0px;
  }

  .nav-dropdown .nav-dropbtn {
    color:                var(--text-color);
    font-weight:          lighter;
  }

  .distill-site-header .nav-dropdown:hover .nav-dropbtn {
    color:                var(--code-grey);
    font-weight:          lighter;
  }

  .nav-dropdown-content a:hover {
    color:                var(--hover-color, white);
    background-color:     var(--color-secondary);
    font-weight:          lighter;
  }



  .distill-site-footer {
    --text-color:         rgba(255, 255, 255, 0.8);
    --text-size:          15px;
    --hover-color:        white;
    --bkgd-color:         #0F2E3D;
  }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */

  /*-- SECTION HEADER STYLING --*/

  d-article {
    --header-color:       var(--color-primary);
  }

  d-article h1 {
    font-size:            var(--title-size);
    letter-spacing:       1px;
    line-height:          1.1em;
    margin-top:           1.5rem;
    margin-bottom:        0.5rem;
    padding-bottom:       0.6rem;
  }

  d-article h2 {
    color:                var(--dark-grey) !important;
    font-size:            1.4rem;
    letter-spacing:       1px;
    line-height:          1.1em;
    margin-top:           1.0rem;
    margin-bottom:        0.5rem;
    padding-bottom:       0.5rem;
  }

  d-article h3 {
    font-size:            1.2rem;
    line-height:          1.1em;
    margin-top:           1.0rem;
    margin-bottom:        0.5rem;
    letter-spacing:       1px;
  }

  d-article h4 {
    font-size:            1.1rem;
    color:                var(--dark-grey) !important;
    line-height:          1.1em;
    margin-top:           1.0rem;
    margin-bottom:        0.5rem;
  }

  d-article h5 {
    font-size:            1.1rem;
    font-style:           italic;
    color:                var(--dark-grey) !important;
    line-height:          1.1em;
    margin-top:           0.5rem;
    margin-bottom:        0.8rem;
  }

  d-article h6 {
    font-size:            1.1rem;
    color:                var(--dark-grey) !important;
    line-height:          1.1em;
    margin-top:           0.5rem;
    margin-bottom:        0.8rem;
    text-decoration:      underline;
  }


  /* Formatting tables (can update here or individually) */
  table, td, tr, th {
    border-collapse:      collapse;
    font-family:          Open Sans;
    border:               1px solid gainsboro;
    vertical-align:       top;
  }

  d-article table th, d-article table td {
    font-size:            15px;
    padding:              2px 8px;
    border:               1px solid gainsboro;
  }

  /* ----------- LINK STYLING ----------- */
  d-article a {
    border-bottom:        0px;
    text-decoration:      none;
    color:                #047C91;
    font-weight:          bold;
  }

  a {
    border-bottom:        0px;
    text-decoration:      none;
    color:                #047C91;
    font-weight:          bold;
  }

  a:hover {
    border-bottom:        1px solid rgba(0, 0, 0, 0.8);
    color:                var(--dark-grey);
    text-decoration:      none;
  }


  /* -------- CODE STYLING ----------- */

  d-article code {
    font-family:          Roboto Mono;
    background-color:     #EBEBEB;
    color:                black;
    border-radius:        3px;
  }

  /* making code chunks with scroll bar */
  d-article pre { 
    border-radius:        3px; /* rounded chunk window*/
    font-size:            14px; /* output text size */
    color:                black; /* output text colour */
    background-color:     #EBEBEB; /* output chunk background colour */
    padding:              5px 5px 5px 18px; /* top,right,bottom,left padding values */
    overflow:             auto !important; /* enables scroll bar */
    max-height:           200px;
    margin-top:           1.0rem;
  }

  d-article div.sourceCode pre { 
    border-radius:        3px;
    font-size:            14px; /* output text size */
    color:                black;
    background-color:     #EBEBEB;
    padding:              5px 5px 5px 18px;
    overflow:             auto !important;
    max-height:           200px;
  }


  /* -------- LIST STYLING -------- */
  /* Smaller spacing in bullet lists */
  d-article li {
    margin-bottom:        0px;
  }
  /* no bottom margin on nested lists */
  d-article ul ul {
    margin-bottom:        0px;
  }
  d-article ul ul ul {
    margin-bottom:        0px;
  }



  figure {
      position:           relative;
      margin-bottom:      1.5em;
      margin-top:         1.5em;
  }</style>
  <style type="text/css">
  /* base style */

  /* FONT FAMILIES */

  :root {
    --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  body,
  .posts-list .post-preview p,
  .posts-list .description p {
    font-family: var(--body-font), var(--body-default);
  }

  h1, h2, h3, h4, h5, h6,
  .posts-list .post-preview h2,
  .posts-list .description h2 {
    font-family: var(--heading-font), var(--heading-default);
  }

  d-article div.sourceCode code,
  d-article pre code {
    font-family: var(--mono-font), var(--mono-default);
  }


  /*-- TITLE --*/
  d-title h1,
  .posts-list > h1 {
    color: var(--title-color, black);
  }

  d-title h1 {
    font-size: var(--title-size, 50px);
  }

  /*-- HEADERS --*/
  d-article h1,
  d-article h2,
  d-article h3,
  d-article h4,
  d-article h5,
  d-article h6 {
    color: var(--header-color, rgba(0, 0, 0, 0.8));
  }

  /*-- BODY --*/
  d-article > p,  /* only text inside of <p> tags */
  d-article > ul, /* lists */
  d-article > ol {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
    font-size: var(--body-size, 1.06rem);
  }


  /*-- CODE --*/
  d-article div.sourceCode code,
  d-article pre code {
    font-size: var(--code-size, 14px);
  }

  /*-- ASIDE --*/
  d-article aside {
    font-size: var(--aside-size, 12px);
    color: var(--aside-color, rgba(0, 0, 0, 0.6));
  }

  /*-- FIGURE CAPTIONS --*/
  figure .caption,
  figure figcaption,
  .figure .caption {
    font-size: var(--fig-cap-size, 13px);
    color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
  }

  /*-- METADATA --*/
  d-byline h3 {
    font-size: var(--heading-size, 0.6rem);
    color: var(--heading-color, rgba(0, 0, 0, 0.5));
  }

  d-byline {
    font-size: var(--body-size, 0.8rem);
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  d-byline a,
  d-article d-byline a {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  /*-- TABLE OF CONTENTS --*/
  .d-contents nav h3 {
    font-size: var(--heading-size, 18px);
  }

  .d-contents nav a {
    font-size: var(--contents-size, 13px);
  }

  /*-- APPENDIX --*/
  d-appendix h3 {
    font-size: var(--heading-size, 15px);
    color: var(--heading-color, rgba(0, 0, 0, 0.65));
  }

  d-appendix {
    font-size: var(--text-size, 0.8em);
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  d-appendix d-footnote-list a.footnote-backlink {
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  .distill-site-header .title {
    font-size: var(--title-size, 18px);
    font-family: var(--navbar-font), var(--heading-default);
  }

  .distill-site-header a,
  .nav-dropdown .nav-dropbtn {
    font-family: var(--navbar-font), var(--heading-default);
  }

  .nav-dropdown .nav-dropbtn {
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    font-size: var(--text-size, 15px);
  }

  .distill-site-header a:hover,
  .nav-dropdown:hover .nav-dropbtn {
    color: var(--hover-color, white);
  }

  .distill-site-header {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer a:hover {
    color: var(--hover-color, white);
  }</style>
  <!--/radix_placeholder_distill-->
  <script src="site_libs/header-attrs-2.23/header-attrs.js"></script>
  <script src="site_libs/clipboard-2.0.6/clipboard.min.js"></script>
  <link href="site_libs/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.css" rel="stylesheet" />
  <script src="site_libs/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.js"></script>
  <script>window.xaringanExtraClipboard(null, {"button":"<i class=\"fa fa-clone fa-2x\" style=\"color: #301e64\"><\/i>","success":"<i class=\"fa fa-check fa-2x\" style=\"color: #90BE6D\"><\/i>","error":"<i class=\"fa fa-times fa-2x\" style=\"color: #F94144\"><\/i>"})</script>
  <link href="site_libs/font-awesome-6.4.0/css/all.min.css" rel="stylesheet" />
  <link href="site_libs/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet" />
  <script src="site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <link rel="shortcut icon" href="images/favicon.ico" type="images/favicon.ico">
  <!--/radix_placeholder_site_in_header-->

  <link rel="stylesheet" href="static/toc-styles.css" type="text/css"/>

</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Protocol - Analysis","description":"Detailed instructions for post-processing and acoustic analyses of longline HARP data","authors":[]}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="https://sfregosi.github.io/llamp-hub">
<img src="images/favicon.ico" alt="Logo"/>
</a>
<a href="index.html" class="title">Longline Acoustic Monitoring Project Hub</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="index.html">Home</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Protocols
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="vessels.html">Vessel facilitation</a>
<a href="hardware.html">Hardware</a>
<a href="processing.html">Data processing</a>
<a href="analysis.html">Analysis</a>
<a href="reporting.html">Reporting</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Other
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="summary.html">Summary</a>
<a href="drive-links.html">Drive links</a>
<a href="project-overview.html">Project overview</a>
</div>
</div>
<a href="https://github.com/sfregosi/llamp-hub">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Protocol - Analysis</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Detailed instructions for post-processing and acoustic analyses of longline HARP data</p></p>
</div>


<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#post-processing" id="toc-post-processing">Post-processing</a>
<ul>
<li><a href="#create-github-issue" id="toc-create-github-issue">Create GitHub issue</a></li>
<li><a href="#metadata-and-data-checks" id="toc-metadata-and-data-checks">Metadata and data checks</a></li>
<li><a href="#process-trip" id="toc-process-trip">Process trip</a></li>
<li><a href="#final-checks" id="toc-final-checks">Final checks</a></li>
</ul></li>
<li><a href="#acoustic-analyses" id="toc-acoustic-analyses">Acoustic analyses</a>
<ul>
<li><a href="#create-github-issue-1" id="toc-create-github-issue-1">Create GitHub issue</a></li>
<li><a href="#odontocetes" id="toc-odontocetes">Odontocetes</a>
<ul>
<li><a href="#event-annotation" id="toc-event-annotation">Event annotation</a>
<ul>
<li><a href="#logging-in-triton" id="toc-logging-in-triton">Logging in Triton</a></li>
</ul></li>
<li><a href="#automated-detection" id="toc-automated-detection">Automated detection</a>
<ul>
<li><a href="#pamguard-setup" id="toc-pamguard-setup">Pamguard setup</a></li>
<li><a href="#run-pamguard" id="toc-run-pamguard">Run Pamguard</a></li>
<li><a href="#backup-outputs" id="toc-backup-outputs">Backup outputs</a></li>
</ul></li>
<li><a href="#classification" id="toc-classification">Classification</a>
<ul>
<li><a href="#cloning-code" id="toc-cloning-code">Cloning code</a></li>
<li><a href="#running-classification" id="toc-running-classification">Running classification</a></li>
</ul></li>
</ul></li>
<li><a href="#noise" id="toc-noise">Noise</a>
<ul>
<li><a href="#underwater-recordings" id="toc-underwater-recordings">Underwater recordings</a></li>
</ul></li>
<li><a href="#in-air-recordings" id="toc-in-air-recordings">In-air recordings</a></li>
</ul></li>
<li><a href="#past-protocols" id="toc-past-protocols">Past protocols</a>
<ul>
<li><a href="#last-updated" id="toc-last-updated">Last updated</a></li>
</ul></li>
</ul>
</nav>
</div>
<div class="layout-chunk" data-layout="l-body">

</div>
<h1 id="post-processing">Post-processing</h1>
<p>First there is a set of tasks that are sort of post-processing/pre-analysis - where data are checked and metadata updated.</p>
<h4 id="create-github-issue">Create GitHub issue</h4>
<p>Create a new post-processing issue for the latest trip</p>
<ul>
<li>Navigate to the <a href="https://github.com/sfregosi/llamp" target="_blank">llamp</a> repository’s <a href="https://github.com/sfregosi/llamp/issues/new/choose" target="_blank">New Issue</a> page and press the green <strong>Get Started</strong> button for the <strong>Post-processing template</strong></li>
<li>Update the newly created issue name with the correct trip number, add any assignees, and add to the <a href="https://github.com/users/sfregosi/projects/3" target="_blank">Longline Acoustic Monitoring Project</a></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ss-ghi-pp"></span>
<a href="images/screenshot_github_analysis-template.png" target="_blank"><img src="images/screenshot_github_analysis-template.png" alt="Screenshot showing the new issue template selection page on GitHub" width="65%" /></a>
<p class="caption">
Figure 1: Screenshot showing the new issue template selection page on GitHub
</p>
</div>
</div>
<h2 id="metadata-and-data-checks">Metadata and data checks</h2>
<ul>
<li>Add trip to <code>phase_3_multi_deployments_summary.xlsx</code> on 5 tabs
<ul>
<li><strong>DataSummary_UW:</strong> add 5 rows following format of previous trips with trip number in column A, vessel name and frame/datalogger numbers in column B, and the date for each deployed set (1 up to 8) in columns C to J). Note any problems or inconsistencies for each recorder in the ‘notes’ column</li>
<li><strong>DataSummary_IA:</strong> added 7 rows, copying the ‘Status’ and ‘Location’ column values from an earlier trip</li>
<li><strong>Depredation:</strong> provide a summary of the trip dates and Y or N for depredation with notes on specifically which sets, if any, had bait or catch depredation</li>
<li><strong>ProcessingStatus:</strong> add a row for each recorder deployed and use this track steps as they are completed for each recorder + any notes on issues</li>
<li><strong>AnalysisStatus:</strong> add a row for each recorder and track analysis steps (below) here</li>
<li><strong>Bouts:</strong> not used for now. Current data is from Phase I and II analyses and is just left there as a placeholder</li>
</ul></li>
<li>Create <code>README_LL0##.txt</code> file on server (<code>//PICQUEENFISH/PSD2/CRP/LLHARP</code>) within the folder for this trip. This README will house any notes about data issues/trip inconsistencies while working through post-processing and analysis steps</li>
<li>Check observer datasheets for readability and combine if needed (if photographed rather than scanned)
<ul>
<li>In Adobe Acrobat Pro: <em>File &gt; Create &gt; Combine Files into a Single PDF…</em></li>
<li>Drag or select all photo files</li>
<li>Use the <em>Scan &amp; OCR</em> tools to ‘Enhance’ each page
<ul>
<li>After selecting <em>Scan &amp; OCR</em> on the right hand tools menu, click <em>Enhance &gt; Camera Image</em> from the top tools menu</li>
<li>Page borders will appear. Adjust the extent of the page borders to include the whole page and exclude any background and click <em>Enhance Page</em></li>
<li>The default enhance level usually obscures some of the entries so reduce the enhancement level using the <em>Adjust enhancement level</em> slider until it is readable</li>
<li>Click on the next thumbnail to repeat for the next page</li>
</ul></li>
<li>Save within the trip’s server folder with the filename <code>LL0##_observer_sheets_photos.pdf</code></li>
</ul></li>
<li>Transcribe underwater and in-air datasheets to .xlsx
<ul>
<li>Use the blank template found on SF’s local machine at <code>C:\Users\Selene.Fregosi\Documents\longline_local\tripExcelSummaries\</code>
<code>LL000_Summary_phase3_template.xlsx</code> or in the llamp repository at <a href="https://github.com/sfregosi/llamp/blob/main/files/LL000_Summmary_phase3template.xlsx" target="_blank">LL000_Summary_phase3template.xlsx</a></li>
<li>Save the template as <code>LL0##_Summary.xlsx</code> within this trip’s server folder</li>
<li>Fill in observer noted set/haul/recorder deployment times in the <strong>Summary</strong> tab</li>
<li>Fill in observer noted in-air recording times and filenames in the <strong>In-air</strong> tab</li>
<li>Updated the 4 <strong>RecorderTimes_FR##</strong> tabs with the correct frame numbers</li>
</ul></li>
<li>Review underwater data LTSA in Triton
<ul>
<li>Mark actual recorder in/out times from the acoustics and record the in/out times in the <strong>RecorderTimes</strong> tab(s) of <code>LL0##_summary.xlsx</code> created above
<ul>
<li>Use one tab per recorder/LTSA</li>
<li>Recordings are in UTC, so note in/out times in UTC and subtract 10 hours to also convert to local time for comparison to observer noted times</li>
</ul></li>
<li>Note data availability and quality in the <strong>DataSummary_UW</strong> tab of <code>phase_3_multi_deployments_summary.xlsx</code>
<ul>
<li>Fill green for audio, red for no audio</li>
<li>Note the recorder deployment order (1-4) for each set</li>
<li>Make comments for any irregularities found such as noise, on deck recordings (recorder did not automatically turn off after recovery), data gaps, etc.</li>
<li>Report any problems with noise or missing data to the LLHARP hardware manager (likely Erik Norris)</li>
</ul></li>
</ul></li>
<li>Review in-air data in Raven (or other?)
<ul>
<li>Load all files for a single recorder (e.g. Z03 or Z04) by selecting all files and dragging into the Raven window</li>
<li>Select <em>Page files</em> and set page length to 120 or 180 seconds
<ul>
<li>Each file is separated by a green dashed line; can move through files with black arrow at top right or by selecting the file number from the dropdown</li>
</ul></li>
<li>Confirm file numbers, durations, and voice comments align with what is on the datasheet and transcribed to <code>L0##_summary.xlsx</code></li>
<li>Note data availability and quality in the <strong>DataSummary_IA</strong> tab of <code>phase_3_multi_deployments_summary.xlsx</code>
<ul>
<li>Fill green for audio, red for no audio</li>
<li>Specify the file number for each set and recording sample</li>
<li>Note any irregularities such as missing data or incorrect timing</li>
</ul></li>
</ul></li>
</ul>
<p><sub><a href="#">Back to top</a></sub></p>
<h2 id="process-trip">Process trip</h2>
<p>Run <code>workflow_processTrip.m</code> to work through converting the summary docs to .mat, running some log checks, and splitting up .xwavs that span multiple sets.</p>
<ul>
<li>Set trip information in top section (unnumbered) of <code>workflow_processTrip.m</code>
<ul>
<li>Trip number <code>trip =</code> on line 41</li>
<li>Frames to process (default is <code>frToProcess = 'all';</code> on line 43</li>
<li>Paths on lines 46 to 62</li>
</ul></li>
<li>Run section <code>(1)</code> to convert <code>LL0##_Summary.xlsx</code> times and locations to a .mat file
<ul>
<li>Check for timing inconsistencies as prompted</li>
<li>Check any location inconsistencies from the generated plot</li>
<li>Note any issues and try to fix discrepancies where possible, noting these issues or corrections in the <strong>README</strong></li>
</ul></li>
<li>Run section <code>(2)</code> to manually enter the frame and datalogger numbers when prompted
<ul>
<li>The format should be <code>FR##_DL##</code> (e.g., <code>FR04_DL64</code>)</li>
<li>Hit <em>Enter</em> after each entry, and <em>Enter</em> again after all are entered to exit input state</li>
</ul></li>
<li>Run section <code>(3)</code> to summarize the recording durations, from the observer noted times and the acoustic record
<ul>
<li>Manually check durations for any large discrepancies between the acoustic record and observer log</li>
<li>If corrections are needed, make these corrections and note them in the <strong>README</strong></li>
</ul></li>
<li>Run section <code>(4)</code> to work through the xwavs that span across sets and split the files as needed to preserve recording timing information for later analysis
<ul>
<li>This section will <code>pause</code> after calculating the number of file gaps. Manually compare this number to the observations in the manually marked recorder in/out times and if they match, hit <em>Enter</em> to continue</li>
<li>This section will take some time and will save ‘original’ xwavs before writing new, split xwavs</li>
<li>Update the <strong>README</strong> with info on the number of original xwavs, gaps, and deck test or on deck recordings and any other relevent notes</li>
</ul></li>
<li>Optional, run section <code>(5)</code> to plot the drifts again and TDR data, for reporting purposes. <strong><em>Section 5 is under development</em></strong></li>
</ul>
<p><sub><a href="#">Back to top</a></sub></p>
<h2 id="final-checks">Final checks</h2>
<p>After <code>workflow_processTrip.m</code>, finalize the created ltsas and summary docs.</p>
<ul>
<li>If xwavs were split, remake the LTSA in Triton
<ul>
<li>Use a 5 sec/100 Hz resolution for odontocete analysis</li>
<li>Name the LTSA <code>LL0##_FR##_DL##_5s_100Hz_splitFiles.ltsa</code> and save within the xwavs folder</li>
</ul></li>
<li>Make a finer resolution LTSA for noise analysis
<ul>
<li>Use a 2 sec/10 Hz resolution</li>
<li>Name the file <code>LL0##_FR##_DL##_2s_10Hz.ltsa</code> and save within the xwavs folder</li>
</ul></li>
<li>Finalize the <strong>README</strong> and <code>phase_3_multi_deployments_summary.xslx</code> by ensuring all inconsistencies are noted, and data checks completed, and all processing steps are done</li>
<li>Run <code>workflow_database_pullVesselIDs.R</code> key for working with LOTUS database (limited to those with signed NDA/LOTUS access)</li>
</ul>
<p><sub><a href="#">Back to top</a></sub></p>
<hr />
<h1 id="acoustic-analyses">Acoustic analyses</h1>
<h4 id="create-github-issue-1">Create GitHub issue</h4>
<p>Create a new issue to add this task to the <a href="https://github.com/users/sfregosi/projects/3" target="_blank">Longline Acoustic Monitoring Project</a></p>
<ul>
<li>Navigate to the <a href="https://github.com/sfregosi/llamp">llamp</a> repository’s <a href="https://github.com/sfregosi/llamp/issues/new/choose" target="_blank">New Issue</a> page and press the green <strong>Get Started</strong> button for the <strong>Analysis template</strong></li>
<li>Update the created issue name with the correct trip number, add any assignees, and add to the <a href="https://github.com/users/sfregosi/projects/3" target="_blank">Longline Acoustic Monitoring Project</a></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ss-ghi-a"></span>
<a href="images/screenshot_github_analysis-template.png" target="_blank"><img src="images/screenshot_github_analysis-template.png" alt="Screenshot showing the new issue template selection page on GitHub" width="65%" /></a>
<p class="caption">
Figure 2: Screenshot showing the new issue template selection page on GitHub
</p>
</div>
</div>
<h2 id="odontocetes">Odontocetes</h2>
<p>Identifying false killer whale vocalizations from the longline recordings involves three main steps: manual annotation of possible odontocete events, automated detection of clicks, whistles, and burst pulses, and classification of the events based on the outputs of the detection process to provide a probability of false killer whale or unidentified odontocete species.
The manual <a href="#event-annotation">event annotation</a> and <a href="#automated-detection">automated detection</a> steps can be done simultanously/in any order; they do not rely on one another. The <a href="#classification">classification</a> steps require the outputs from both the manual annotation and automated detection so must be done last.</p>
<h3 id="event-annotation">Event annotation</h3>
<p>Candidate odontocete events are manually logged in MATLAB-based program Triton. This identifies the actual areas of interest, or analysis units, for odontocete detection and classification.</p>
<h4 id="logging-in-triton">Logging in Triton</h4>
<ul>
<li>Use the latest version of Triton hosted on Github: <a href="https://github.com/MarineBioAcousticsRC/Triton">MarineBioAcousticsRC/Triton</a>
<ul>
<li>Suggest ‘cloning’ this repository to your local computer using GitHub/GitHub Desktop to be able to stay up to date with any changes</li>
<li>If you will be running analyses on a virtual machine, you can clone the repository to a folder on your user drive that will be accessible when remoted in to the virtual machine. After cloning, right-click on this repository from the list of repositories within GitHub Desktop and select ‘Create alias’ to add a ‘VM’ or ‘remote’ label to this repository to distinguish it from any local copies</li>
</ul></li>
<li>Add Triton to the MATLAB path</li>
<li>Add the <em>Logger Remora</em></li>
<li>Create a new log per trip/recorder (e.g., <code>log_LL060_FR38_DL65.xls</code>)</li>
<li>Manually browse the LTSA and mark start and end times of potential odontocete encounters
<ul>
<li>Use the 5 sec, 100 Hz LTSA for odontocete sounds</li>
<li>View 15-30 minute windows at a time</li>
<li>Adjust brightness and contrast as needed for each deployment and change as needed throughout the deployment as the sound energy changes</li>
<li>Note potential species ID as possible; while our focus is fkw, any notes about potential species are useful for any future work</li>
</ul></li>
<li>Clean up and collapse final events into a .csv
<ul>
<li>Open the Triton-generated log in excel and copy to a new csv file</li>
<li>Save .csv with naming convention <code>LL0##_FR##_DL##_encounterTimes.csv</code></li>
<li>Must include columns ‘start’, ‘stop’, ‘species’, and ‘id’<br />
</li>
<li>‘id’ column should be manually added and include the trip string and just a sequential account of events (e.g., L064_FR52_DL59_1, L064_FR52_DL59_2…)</li>
<li>A fifth notes column can be included if relevant</li>
<li><em>These column namings, and what is listed can lead to some issues/unexpected outcomes when exporting in <code>PAMpal</code> and predicting with <code>banter</code> so this might change!</em></li>
</ul></li>
</ul>
<p><sub><a href="#">Back to top</a></sub></p>
<h3 id="automated-detection">Automated detection</h3>
<p>Pamguard is used to detect individual clicks, whistles, and burst pulses for further analysis. For ease and to prepare for future analyses, Pamguard is run on the full set of recordings for a given trip. For speed, Pamguard could be run just across the odontocete encounters above, but it generally runs fairly quickly and so is simpler to just run over the full xwav folder.</p>
<h4 id="pamguard-setup">Pamguard setup</h4>
<ul>
<li>Use Pamguard version 2.02.07b.
<ul>
<li>Typically, the latest Pamguard version is available at <a href="http://www.pamguard.org/" target="_blank">pamguard.org</a> but in this case we had a special bug fix release/version and so sourced files from JLKM.</li>
<li>Installing and configuring Pamguard has a few specific requirements, so if it is a new install, make sure it is set up correctly (note to self: increase memory, <code>-smru</code> tag, ensure is in a folder with read/write access)</li>
</ul></li>
<li>Open Pamguard 2.02.07b
<ul>
<li>Navigate to where this version of Pamguard is saved (typically <code>C:\Program Files\pamguardbeta\Pamguard_20207b</code> or <code>C:\Program Files\Pamguard\Pamguard_20207b</code>)</li>
<li>Pamguard has three ‘modes’; to run a detector initially, use the primary mode, just called <strong>Pamguard</strong> (it may be <strong>PamguardBeta</strong> depending on the installed version/installed folder location/installation naming convention)</li>
<li>Open the primary mode by double clicking <code>Pamguard.exe</code></li>
</ul></li>
<li>At startup, load the <code>pam20207b_llharp_banter.psfx</code> <a href="https://github.com/sfregosi/llamp/blob/main/pamguard/settings/pam20207b_llharp_banter.psfx" target="_blank">download here</a> preferences file
<ul>
<li>This sets up the basic array configuration, sound acquisition, fft engine, and database modules that will need to be modified for each survey, plus the decimation process, click, whistle and moan, and cepstrum detector modules that should not be modified</li>
<li>Detailed instructions for setting up this preferences file, with screenshots, can be found in the <a href="https://github.com/sfregosi/glider-MHI/blob/main/docs/_site/pg_settings.html">glider-MHI repo</a> or talk to JLKM for more info!</li>
</ul></li>
<li>Save a copy of the preferences file specific for this survey before making any modifications
<ul>
<li><em>File &gt; Save Configuration As …</em></li>
<li>Name the file the base file name plus the trip/recorder string e.g., <code>pam20207b_llharp_banter_LL060_FR38_DL65.psfx</code></li>
<li>Save this preferences file in <em>pamguard</em> folder within the <code>LLHARP\Analysis\phase3</code> folder on the server</li>
</ul></li>
<li>Modify the data input to the Sound Acquisition module
<ul>
<li><em>Settings &gt; Sound Acquisition …</em></li>
<li>In the pop up window, make sure the <em>Data Source Type</em> is set to <em>Audio file folder or multiple files</em></li>
<li>Press <em>Select Folder or Files</em> to browse for specific files</li>
<li>Navigate to the <code>xwavs</code> folder that contains all .x.wav files for a single recorder, select the folder and press <em>Select files and folders</em>. It is ok if this folder also contains an .ltsa or other non .x.wav files</li>
<li>The <em>File date:</em> section should now show the start time of the first recording</li>
<li>Leave all other boxes unchecked/as default and press <em>Ok</em> to close the Audio Data Acquisition settings window</li>
</ul></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ss-sound-aquisition"></span>
<a href="images/screenshot_sound_acquisition_module_folder.png" target="_blank"><img src="images/screenshot_sound_acquisition_module_folder.png" alt="Screenshot showing the correct configuration of the Sound Aquisition module for an example folder of wav files" width="286" /></a>
<p class="caption">
Figure 3: Screenshot showing the correct configuration of the Sound Aquisition module for an example folder of wav files
</p>
</div>
</div>
<ul>
<li>Set the output database
<ul>
<li><em>File &gt; Database &gt; Database Selection</em></li>
<li>Press <em>Browse/Create …</em></li>
<li>Navigate to the previously created <code>pamguard</code> folder</li>
<li>If it doesn’t already exist, create a <code>databases</code> folder within the <code>pamguard</code> folder</li>
<li>Navigate to inside the <code>databases</code> folder and type the desired filename in the <em>File name:</em> field below and press <em>Open</em>
<ul>
<li>Name the database the same as the preferences file (but without the .psfx extension) e.g., <code>pam20207b_llharp_banter_LL060_FR38_DL65</code></li>
<li>This long name long, yes, but is useful because it contains information about the Pamguard version used, the base preferences file, and what acoustic data this database specifically contains</li>
</ul></li>
<li>A pop-up will ask to ‘Create blank database [filename.sqlite3]’ and hit <em>OK</em></li>
<li>Press <em>OK</em> on the <em>Database Selection</em> window</li>
</ul></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ss-database"></span>
<a href="images/screenshot_database-selection.png" target="_blank"><img src="images/screenshot_database-selection.png" alt="Screenshot showing the correct configuration for specifying the output database" width="301" /></a>
<p class="caption">
Figure 4: Screenshot showing the correct configuration for specifying the output database
</p>
</div>
</div>
<ul>
<li>Set the output binaries folder
<ul>
<li><em>File &gt; Binary Store &gt; Storage Options …</em></li>
<li>In the <em>Binary Store Options</em> window press <em>Browse</em></li>
<li>Navigate to the <code>pamguard</code> folder</li>
<li>If it doesn’t already exist, create a <code>binaries</code> folder within the <code>pamguard</code> folder</li>
<li>Navigate to inside the <code>binaries</code> folder and enter the desired binaries folder name in the <em>Folder name:</em> field below and press <em>Select storage folder</em>
<ul>
<li>Name the binaries the same as the database and preferences files e.g., <code>pam20207b_llharp_banter_LL060_FR38_DL65</code></li>
</ul></li>
<li>Press <em>Ok</em></li>
<li>A pop up will appear stating ‘The directory [foldername] does not exist do you want to create it?’ and press <em>Yes</em></li>
<li>Press <em>Ok</em> again on the <em>Binary Store Options</em> window</li>
</ul></li>
<li>Save these changes with <em>File &gt; Save Configuration</em> to save all the changes that have now been mapped to your PC and are specific for this survey</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ss-binary-store"></span>
<a href="images/screenshot_binary_store_options.png" target="_blank"><img src="images/screenshot_binary_store_options.png" alt="Screenshot showing the correct configuration for the binary storage folder" width="401" /></a>
<p class="caption">
Figure 5: Screenshot showing the correct configuration for the binary storage folder
</p>
</div>
</div>
<h4 id="run-pamguard">Run Pamguard</h4>
<p>Each recorder from each trip will be run individually and this will take several hours to run.</p>
<ul>
<li>Press the red circular <strong>record</strong> button to start processing the selected files/folder</li>
<li>A spectrogram should start scrolling in the <em>Spectrogram</em> tab and colored symbols should start appearing on the <em>Click Detection</em> tab as clicks are detected</li>
<li>Clicks can be examined in real-time by clicking on individual symbols</li>
<li>The <strong>pause</strong> button at the top can be used to stop processing at the current file, and when the <strong>record</strong> button is pressed again it will resume where it previously paused</li>
<li>If the process is stopped and Pamguard is closed, when it is reopened the process would start at the first file in the folder, resulting in possibly duplicate results in the database and binaries</li>
</ul>
<h4 id="backup-outputs">Backup outputs</h4>
<p>Each time a database and/or binaries are opened in Pamguard Viewer after being created, they have the potential to be modified. This could overwrite or mess things up so it is good practice to always save an ‘original copy’ of the database and binaries before doing any additional analyses.</p>
<ul>
<li>Make a copy of both the database and folder of binaries and store on the data server in a folder called <code>originals</code> within the <code>pamguard</code> folder.</li>
</ul>
<p><sub><a href="#">Back to top</a></sub></p>
<h3 id="classification">Classification</h3>
<p>The clicks, burst pulses, and whistles detected using Pamguard are grouped by event (from the manual annotation) and exported by R package <code>PAMpal</code>, then fed into the classification R package <code>banter</code> to try to identify which encounters were possibly FKW and which were likely other odontocete species.</p>
<h4 id="cloning-code">Cloning code</h4>
<p>Classification code is located in the <a href="https://github.com/sfregosi/llamp">llamp</a> repository in the <a href="https://github.com/sfregosi/llamp/tree/main/R">R folder</a>.</p>
<p>Because this code may be regularly updated, it is best to work directly with it using GitHub/GitHub Desktop. If you plan to make modifications to the code (for example, updating paths to a specific machine or workflow) then it is best to make a new <strong>‘branch’</strong> on this repository to have your own separate stream of edits. This <strong>‘branch’</strong> is an off-shoot of the original so you’ll be able to pull in updates committed to the original repo, and you’ll be able to make ‘pull requests’ to contribute any more broad changes to the original. But, with a branch, your changes won’t automatically get updated for others and it will avoid conflicts of multiple people working within the code at once. <em>Creating a branch is only possible if you are a collaborator in the repository; if not, you can ‘fork’ the repository and still stay up-to-date with changes as well as make pull-requests.</em></p>
<p>The classification process also requires some functions located in the <a href="https://github.com/sfregosi/CRPTools">CRPTools</a> repository. This repository only needs to be cloned to your local machine (first section below) because it will not be modified for a particular computer.</p>
<p>Below are suggested steps for cloning, creating a new branch, and working with GitHub/GitHub Desktop.</p>
<p><strong>To clone a repository:</strong></p>
<ul>
<li>Open GitHub Desktop</li>
<li>Select <em>File</em> &gt; <em>Clone repository…</em></li>
<li>Select the <em>URL</em> tab and paste <code>https://github.com/sfregosi/llamp</code> into the empty URL space</li>
<li>Specify the location to save the repository on your local machine (suggest <code>documents\github\llamp</code>) and hit <em>Clone</em></li>
<li>This will copy all the <code>llamp</code> components to the specified folder</li>
<li>Select this repository within GitHub Desktop from the <em>Current repository</em> drop down repository list on the left side</li>
</ul>
<p><strong>To create a new branch:</strong></p>
<ul>
<li>The default/primary branch is called <code>main</code>. In the <em>Current branch</em> drop down, select <em>New branch</em> and provide the branch a name (e.g., <code>fregosi</code> or <code>picsn28</code> - the name of your computer)</li>
<li>This will create a new branch and and it’s name should now appear in the <em>Current branch</em> section in GitHub Desktop</li>
<li>Whenever you want to switch between branches, you select it from this drop down in GitHub Desktop. But, once one branch is selected, it should remain the chosen branch through computer restarts, etc, but it is always good to double check if making major changes!</li>
<li>Finally, hit <em>Publish this branch</em> to push this branch to the ‘remote’ location of this repository on github.com. This will only need to be done once after creating a new branch</li>
</ul>
<p><strong>Committing, pushing, and pulling changes:</strong></p>
<ul>
<li>Whenever you make changes to code on your local machine, these changed files will appear in the left side panel of GitHub Desktop. After making a set of specific changes, you can create a <em>snapshot</em> of the files at that point in time (so you can go back if something bad happens, or others can easily track what was changed – the purpose of version control!) by making a <strong>‘commit’</strong> for these changes. Do so by typing a short message/description in the lower left and hitting <em>Commit</em></li>
<li>After committing changes, those changes have been saved on your local repository and branch, but ONLY locally. After making a commit, or several commits (e.g, at the end of the day), <strong>‘push’</strong> these changes to the remote repository on Github.com using the <em>Push origin</em> button on the top right of GitHub Desktop</li>
<li>The top-right will display different options depending on what changes are available
<ul>
<li>If there are local changes, it will display <em>Push origin</em>; it is good practice to push all commits at the end of each day or session working with a particular code set</li>
<li>If there are no local changes, it will say <em>Fetch origin</em>, which will check for new changes from the web</li>
<li>If there are changes present on the remote that are not yet local, it will say <em>Pull origin</em></li>
<li>It is good practice to fetch and pull changes at the start of each day or session to avoid any conflicts of files being changed simultaneously in two locations. If you are working within your own branch, you will be the only one making changes so there won’t really be unexpected changes to be pulled from the web. But, if you are working within the same branch as others, or with code that you are not modifying but others are regularly updating, this becomes more critical</li>
</ul></li>
</ul>
<p><strong>Merging/updating branches</strong></p>
<p>See this other page: <a href="branch-merge.html">branch-merge</a></p>
<h4 id="running-classification">Running classification</h4>
<p>Use the <code>workflow_fkw_predict_phase3.R</code> script to process, the manual events, Pamguard detections, and predict species ID with an existing classification model.</p>
<ul>
<li>Open RStudio and open the <code>llamp.rproj</code>
<ul>
<li>Either go to <em>File</em> &gt; <em>Open Project</em> and navigate to the <code>llamp</code> folder and choose <code>llamp.rproj</code> or</li>
<li>Click on the drop down in the top right of RStudio, select <em>Open Project</em> and navigate to the <code>llamp</code> folder and <code>llamp.rproj</code> file</li>
<li>If the project has been opened before, use the top right drop down to select <code>llamp</code> from the list of recent projects</li>
</ul></li>
<li>The <em>Files</em> tab within RStudio should now show the <code>llamp</code> folder. Navigate to the <code>R</code> folder and open <code>workflow_fkw_predict_phase3.R</code></li>
<li>To run individual lines of code in RStudio, put the cursor somewhere in the line and hit <em>Ctrl + Enter</em>. From there it will move you down to the next line so you can continually press <em>Ctrl + Enter</em> to move through the script</li>
<li>Ensure the proper packages have been installed/updated and loaded</li>
<li>Make needed changes in the <strong>USER DEFINED INPUTS</strong> section
<ul>
<li>Update the trip number and recorder string for the dataset to be classified</li>
<li>Update the paths as necessary to map to the data input and analysis output locations
<ul>
<li><code>path_data</code> and <code>path_local</code> are actually not needed but have been left just in case they are later. They can be commented out with <code>#</code></li>
<li><code>path_analysis</code> should map to the folder that contains the <code>pamguard</code> folder which in turn contains the <code>databases</code> and <code>binaries</code> sub directories</li>
<li><code>path_pg</code> will be generated based on <code>path_analysis</code></li>
</ul></li>
<li>Run all lines in this section after updating</li>
</ul></li>
<li>Step through all lines in the <strong>PAMpal steps</strong> section
<ul>
<li>Enter 16 for <em>bit rate</em> when prompted during parameter object creation</li>
<li>When running <code>View(banter_dets)</code> double check that events all match what was exported in the <code>encounterTimes.csv</code>. There should be a column for start, end, species, and id (unique event id)</li>
<li>This will save several <code>.rda</code> rdata object outputs in an <code>eventData</code> folder</li>
</ul></li>
<li>Step through all lines in the <strong>BANTER steps</strong> section
<ul>
<li>First, load the existing model</li>
<li>Update the path to the CRPTools repository if needed</li>
<li>Predicted species labels will be saved in a .csv</li>
</ul></li>
</ul>
<p><sub><a href="#">Back to top</a></sub></p>
<h2 id="noise">Noise</h2>
<h3 id="underwater-recordings">Underwater recordings</h3>
<p>The primary question for this stage of noise analysis is just if/when it is present in the underwater recordings. The best way to identify the noise in recordings is from manual scanning of LTSAs.</p>
<ul>
<li>Create finer-resolution LTSA in Triton using 2 sec, 10 Hz averaging for noise analysis</li>
<li>Manually scan the LTSA, plotting from 0 Hz to 5 or 10 kHz, and 2-4 hours at a time</li>
<li>Mark the start and end noise of any possible gear noise</li>
</ul>
<p>If the noise is detected, we may conduct additional manual and automated analyses in Pamguard to identify individual clusters and quantify the timing of these clusters.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ss-noise-ltsa"></span>
<a href="images/LL039_set1_noiseExampleLTSA.png" target="_blank"><img src="images/LL039_Set1_noiseExampleLTSA.png" alt="Example LTSA showing the gear noise of interest. The noise is present around 1.5 kHz from the 0.2 to 1.8 hours, with the loudest part centered around 0.6 hours" width="1198" /></a>
<p class="caption">
Figure 6: Example LTSA showing the gear noise of interest. The noise is present around 1.5 kHz from the 0.2 to 1.8 hours, with the loudest part centered around 0.6 hours
</p>
</div>
</div>
<p><strong><svg aria-hidden="true" role="img" viewBox="0 0 576 512" style="height:1em;width:1.12em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M208 64a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM9.8 214.8c5.1-12.2 19.1-18 31.4-12.9L60.7 210l22.9-38.1C99.9 144.6 129.3 128 161 128c51.4 0 97 32.9 113.3 81.7l34.6 103.7 79.3 33.1 34.2-45.6c6.4-8.5 16.6-13.3 27.2-12.8s20.3 6.4 25.8 15.5l96 160c5.9 9.9 6.1 22.2 .4 32.2s-16.3 16.2-27.8 16.2H288c-11.1 0-21.4-5.7-27.2-15.2s-6.4-21.2-1.4-31.1l16-32c5.4-10.8 16.5-17.7 28.6-17.7h32l22.5-30L22.8 246.2c-12.2-5.1-18-19.1-12.9-31.4zm82.8 91.8l112 48c11.8 5 19.4 16.6 19.4 29.4v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V405.1l-60.6-26-37 111c-5.6 16.8-23.7 25.8-40.5 20.2S-3.9 486.6 1.6 469.9l48-144 11-33 32 13.7z"/></svg> THIS SECTION UNDER CONSTRUCTION</strong></p>
<p>Additional automated approaches have been done in the past, but we are holding off on those for now, because they weren’t as reliable as manual scanning. These include the Pamguard Noise Band Monitor Module (using the <code>pam20207b_llharp_noise.psfx</code> preferences file - <a href="https://github.com/sfregosi/llamp/blob/main/pamguard/settings/pam20207b_llharp_noise.psfx" target="_blank">download here</a>) and SanctSound metrics (both third octave level approaches).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ss-noise-band"></span>
<a href="images/screenshot_noise_data_model.png" target="_blank"><img src="images/screenshot_noise_data_model.png" alt="Screenshot showing the data model for the pam20207b_llharp_noise.psfx preferences file, which runs a Noise Band Monitor process" width="472" /></a>
<p class="caption">
Figure 7: Screenshot showing the data model for the pam20207b_llharp_noise.psfx preferences file, which runs a Noise Band Monitor process
</p>
</div>
</div>
<h2 id="in-air-recordings">In-air recordings</h2>
<p><strong><svg aria-hidden="true" role="img" viewBox="0 0 576 512" style="height:1em;width:1.12em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M208 64a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM9.8 214.8c5.1-12.2 19.1-18 31.4-12.9L60.7 210l22.9-38.1C99.9 144.6 129.3 128 161 128c51.4 0 97 32.9 113.3 81.7l34.6 103.7 79.3 33.1 34.2-45.6c6.4-8.5 16.6-13.3 27.2-12.8s20.3 6.4 25.8 15.5l96 160c5.9 9.9 6.1 22.2 .4 32.2s-16.3 16.2-27.8 16.2H288c-11.1 0-21.4-5.7-27.2-15.2s-6.4-21.2-1.4-31.1l16-32c5.4-10.8 16.5-17.7 28.6-17.7h32l22.5-30L22.8 246.2c-12.2-5.1-18-19.1-12.9-31.4zm82.8 91.8l112 48c11.8 5 19.4 16.6 19.4 29.4v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V405.1l-60.6-26-37 111c-5.6 16.8-23.7 25.8-40.5 20.2S-3.9 486.6 1.6 469.9l48-144 11-33 32 13.7z"/></svg> THIS SECTION UNDER CONSTRUCTION</strong></p>
<p>Under development
- Review Zoom recordings to characterize sound</p>
<p><sub><a href="#">Back to top</a></sub></p>
<hr />
<h1 id="past-protocols">Past protocols</h1>
<p><a href="https://docs.google.com/document/d/0BxY-_FjiYpOqUVpMMklhc21zenc/edit?resourcekey=0-t6GUsqDw3FRYaAj9if6_pQ">LLHARP Part III - Data Analysis</a> Google Doc<br />
<em>Last updated 24 March 2017</em><br />
- Manual scanning of LTSAs in Triton to find bouts, whistle classification using Raven to generate manual whistle picks plus ROCCA to trace and classify, and click detection and classification using a a set of Matlab tools (appears to be Triton-based but not sure on specific versions)
- This is the approach used in Bayless et al. 2017</p>
<p><sub><a href="#">Back to top</a></sub></p>
<h2 class="appendix" id="last-updated">Last updated</h2>
<p><svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M128 0c13.3 0 24 10.7 24 24V64H296V24c0-13.3 10.7-24 24-24s24 10.7 24 24V64h40c35.3 0 64 28.7 64 64v16 48V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V192 144 128C0 92.7 28.7 64 64 64h40V24c0-13.3 10.7-24 24-24zM400 192H48V448c0 8.8 7.2 16 16 16H384c8.8 0 16-7.2 16-16V192zM329 297L217 409c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47 95-95c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg> 07 July 2023</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
<h3 id="updates-and-corrections">Corrections</h3>
<p>If you see mistakes or want to suggest changes, please <a href="https://github.com/sfregosi/llamp-hub/issues/new">create an issue</a> on the source repository.</p>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
